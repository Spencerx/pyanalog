# This is a YAML description file for a machine.
# A poor man's Analog HDL (should use Verilog HDLs instead)

title: Analog Paradigm Model 1 CBX with 16x16 XBAR

entities:
   SUM2p:
     computes: o = -(id1*i1+id2*i2)
     input: [ i1, i2 ]
     output: [ o ]
     variables: [ di1, di2 ]
   MUL2p:
     computes: o = id1*i1 * id2*i2  # not correct!
     input: [ i1, i2 ]
     output: [ o ]
     variables: [ di1, di2 ]
   INT2p:
     computes: o = -integral( (id1*i1(t)+id2*i2(t)), t)
     input: [ i1, i2 ]
     output: [ o ]
     variables: [ di1, di2 ]
   ConstantVoltage:
     computes: o = value
     input: []
     output: [ o ]
     variables: [ value ]
   None:
     computes: not-connected-part

partlist:
   I1:
     type: INT2p
     variables: [0,0] # defaults
     input: [] # default
   I2:
     type: INT2p
     variables: [0,0] # defaults
     input: [] # default
   I3:
     type: INT2p
     variables: [0,0] # defaults
     input: [] # default
   M1:
     type: MUL2p
     variables: [0,0] # defaults
     input: [] # default
   M2:
     type: MUL2p
     variables: [0,0] # defaults
     input: [] # default
   S1:
     type: SUM2p
     variables: [0,0] # defaults
     input: [] # default
   S2:
     type: SUM2p
     variables: [0,0] # defaults
     input: [] # default
   S3:
     type: SUM2p
     variables: [0,0] # defaults
     input: [] # default
   PlusOne:
     cannot_be_allocated: True
     type: ConstantVoltage
     input: [] # no input
     variables: [ +1 ]
   MinusOne:
     cannot_be_allocated: True
     type: ConstantVoltage
     input: [] # no input
     variables: [ +1 ]

XBAR:
   - adress: 0x1234  # fixme
     architecture: Single-A8113
     size: [ 16, 16 ]
     # 10 (of 16) used input rows
     input_columns: [
         PlusOne, MinusOne, S3, S2, S2, M2, M1, I3, I2, I1,
         Unused11, Unused12, Unused13, Unused14, Unused15, Unused16
     ]
     # 16 (of 16) used output rows
     output_rows: [
        I1: i1, I1: i2,
        I2: i1, I2: i2,
        I3: i1, I3: i2,
        M1: i1, M1: i2,
        M2: i1, M2: i2,
        S1: i1, S1: i2,
        S2: i1, S2: i2,
        S3: i1, S3: i2
     ]

DPT24:
   - adress: 0x0060  # example
     size: 24
     enumeration:
        - I1: di1    #  1
        - I1: di2    #  2
        - I2: di1    #  3
        - I2: di2    #  4
        - I3: di1    #  5
        - I3: di2    #  6
        - M1: di1    #  7
        - M1: di2    #  8
        - M2: di1    #  9
        - M2: di2    # 10
        - S1: di1    # 11
        - S1: di2    # 12
        - S2: di1    # 13
        - S2: di2    # 14
        - S3: di1    # 15
        - S3: di2    # 16
        - Unused     # 17
        - Unused     # 18
        - Unused     # 19
        - Unused     # 20
        - Unused     # 21
        - Unused     # 22
        - Unused     # 23
        - Unused     # 24
